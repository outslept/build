// Vitest Snapshot v1, https://vitest.dev/guide/snapshot.html

exports[`BRANCH environment variables is set with --branch 1`] = `
"
Netlify Build                                                 
────────────────────────────────────────────────────────────────

> Version
  @netlify/build 1.0.0

> Flags
  branch: test
  debug: true
  repositoryRoot: packages/build/tests/env/fixtures/branch
  testOpts:
    pluginsListUrl: test
    silentLingeringProcesses: true

> Current directory
  packages/build/tests/env/fixtures/branch

> Config file
  packages/build/tests/env/fixtures/branch/netlify.toml

> Resolved config
  build:
    environment:
      - TEST
    publish: packages/build/tests/env/fixtures/branch
    publishOrigin: default
  plugins:
    - inputs: {}
      origin: config
      package: ./plugin

> Context
  production

> Loading plugins
   - ./plugin@1.0.0 from netlify.toml

./plugin (onPreBuild event)                                   
────────────────────────────────────────────────────────────────

test

(./plugin onPreBuild completed in 1ms)
Build step duration: ./plugin onPreBuild completed in 1ms

Netlify Build Complete                                        
────────────────────────────────────────────────────────────────

(Netlify Build completed in 1ms)
Build step duration: Netlify Build completed in 1ms"
`;

exports[`BUILD_ID environment variables is set with --build-id 1`] = `
"
Netlify Build                                                 
────────────────────────────────────────────────────────────────

> Version
  @netlify/build 1.0.0

> Flags
  buildId: test-build
  debug: true
  repositoryRoot: packages/build/tests/env/fixtures/build_id
  testOpts:
    pluginsListUrl: test
    silentLingeringProcesses: true

> Current directory
  packages/build/tests/env/fixtures/build_id

> Config file
  packages/build/tests/env/fixtures/build_id/netlify.toml

> Resolved config
  build:
    environment:
      - TEST
    publish: packages/build/tests/env/fixtures/build_id
    publishOrigin: default
  plugins:
    - inputs: {}
      origin: config
      package: ./plugin

> Context
  production

> Loading plugins
   - ./plugin@1.0.0 from netlify.toml

./plugin (onPreBuild event)                                   
────────────────────────────────────────────────────────────────

test-build

(./plugin onPreBuild completed in 1ms)
Build step duration: ./plugin onPreBuild completed in 1ms

Netlify Build Complete                                        
────────────────────────────────────────────────────────────────

(Netlify Build completed in 1ms)
Build step duration: Netlify Build completed in 1ms"
`;

exports[`CONTEXT environment variables is set with --context 1`] = `
"
Netlify Build                                                 
────────────────────────────────────────────────────────────────

> Version
  @netlify/build 1.0.0

> Flags
  context: test
  debug: true
  repositoryRoot: packages/build/tests/env/fixtures/context
  testOpts:
    pluginsListUrl: test
    silentLingeringProcesses: true

> Current directory
  packages/build/tests/env/fixtures/context

> Config file
  packages/build/tests/env/fixtures/context/netlify.toml

> Resolved config
  build:
    environment:
      - TEST
    publish: packages/build/tests/env/fixtures/context
    publishOrigin: default
  plugins:
    - inputs: {}
      origin: config
      package: ./plugin

> Context
  test

> Loading plugins
   - ./plugin@1.0.0 from netlify.toml

./plugin (onPreBuild event)                                   
────────────────────────────────────────────────────────────────

test

(./plugin onPreBuild completed in 1ms)
Build step duration: ./plugin onPreBuild completed in 1ms

Netlify Build Complete                                        
────────────────────────────────────────────────────────────────

(Netlify Build completed in 1ms)
Build step duration: Netlify Build completed in 1ms"
`;

exports[`DEPLOY_ID environment variables is set with --deploy-id 1`] = `
"
Netlify Build                                                 
────────────────────────────────────────────────────────────────

> Version
  @netlify/build 1.0.0

> Flags
  debug: true
  deployId: test
  repositoryRoot: packages/build/tests/env/fixtures/deploy_id
  testOpts:
    pluginsListUrl: test
    silentLingeringProcesses: true

> Current directory
  packages/build/tests/env/fixtures/deploy_id

> Config file
  packages/build/tests/env/fixtures/deploy_id/netlify.toml

> Resolved config
  build:
    environment:
      - TEST
    publish: packages/build/tests/env/fixtures/deploy_id
    publishOrigin: default
  plugins:
    - inputs: {}
      origin: config
      package: ./plugin

> Context
  production

> Loading plugins
   - ./plugin@1.0.0 from netlify.toml

./plugin (onPreBuild event)                                   
────────────────────────────────────────────────────────────────

test

(./plugin onPreBuild completed in 1ms)
Build step duration: ./plugin onPreBuild completed in 1ms

Netlify Build Complete                                        
────────────────────────────────────────────────────────────────

(Netlify Build completed in 1ms)
Build step duration: Netlify Build completed in 1ms"
`;

exports[`Does not pass BUGSNAG_KEY to build command and plugins 1`] = `
"
Netlify Build                                                 
────────────────────────────────────────────────────────────────

> Version
  @netlify/build 1.0.0

> Flags
  debug: true
  repositoryRoot: packages/build/tests/env/fixtures/bugsnag_key
  testOpts:
    pluginsListUrl: test
    silentLingeringProcesses: true

> Current directory
  packages/build/tests/env/fixtures/bugsnag_key

> Config file
  packages/build/tests/env/fixtures/bugsnag_key/netlify.toml

> Resolved config
  build:
    command: node index.js
    commandOrigin: config
    publish: packages/build/tests/env/fixtures/bugsnag_key
    publishOrigin: default

> Context
  production

build.command from netlify.toml                               
────────────────────────────────────────────────────────────────

$ node index.js
undefined

(build.command completed in 1ms)
Build step duration: build.command completed in 1ms

Netlify Build Complete                                        
────────────────────────────────────────────────────────────────

(Netlify Build completed in 1ms)
Build step duration: Netlify Build completed in 1ms"
`;

exports[`Environment variables are set in plugins 1`] = `
"
Netlify Build                                                 
────────────────────────────────────────────────────────────────

> Version
  @netlify/build 1.0.0

> Flags
  debug: true
  repositoryRoot: packages/build/tests/env/fixtures/plugin
  testOpts:
    pluginsListUrl: test
    silentLingeringProcesses: true

> Current directory
  packages/build/tests/env/fixtures/plugin

> Config file
  packages/build/tests/env/fixtures/plugin/netlify.toml

> Resolved config
  build:
    publish: packages/build/tests/env/fixtures/plugin
    publishOrigin: default
  plugins:
    - inputs: {}
      origin: config
      package: ./plugin

> Context
  production

> Loading plugins
   - ./plugin@1.0.0 from netlify.toml

./plugin (onPreBuild event)                                   
────────────────────────────────────────────────────────────────

en_US.UTF-8

(./plugin onPreBuild completed in 1ms)
Build step duration: ./plugin onPreBuild completed in 1ms

Netlify Build Complete                                        
────────────────────────────────────────────────────────────────

(Netlify Build completed in 1ms)
Build step duration: Netlify Build completed in 1ms"
`;

exports[`build.environment are set in plugins 1`] = `
"
Netlify Build                                                 
────────────────────────────────────────────────────────────────

> Version
  @netlify/build 1.0.0

> Flags
  debug: true
  repositoryRoot: packages/build/tests/env/fixtures/build
  testOpts:
    pluginsListUrl: test
    silentLingeringProcesses: true

> Current directory
  packages/build/tests/env/fixtures/build

> Config file
  packages/build/tests/env/fixtures/build/netlify.toml

> Resolved config
  build:
    environment:
      - TEST
    publish: packages/build/tests/env/fixtures/build
    publishOrigin: default
  plugins:
    - inputs: {}
      origin: config
      package: ./plugin

> Context
  production

> Loading plugins
   - ./plugin@1.0.0 from netlify.toml

./plugin (onPreBuild event)                                   
────────────────────────────────────────────────────────────────

test

(./plugin onPreBuild completed in 1ms)
Build step duration: ./plugin onPreBuild completed in 1ms

Netlify Build Complete                                        
────────────────────────────────────────────────────────────────

(Netlify Build completed in 1ms)
Build step duration: Netlify Build completed in 1ms"
`;
